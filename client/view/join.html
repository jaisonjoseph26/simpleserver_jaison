<!-- 

PROG8165 - Web Design and Development Princ
Instructor: R Kozak

Group members: 

1) Jaison Joseph - Student no: 7714660
2) Sailesh Valiveti - Student No 7832116


 -->

<!doctype html>
<html lang="en">
  <head>
    <title>Simplest Website</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/bootstrap-3.3.7-dist/css/bootstrap.min.css">
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css"> 
    <link rel="stylesheet" href="../css/style.css"> 
    <script src="../js/jquery.min.js"></script>

    <script src="/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

     <script>
            /*global $*/
            function handleJoinAttempt(){
                var fname = $('#join_fname').val();
                var lname = $('#join_lname').val();
                var email = $('#join_email').val();
                var password = $('#join_password').val();
                var repeatPassword = $('#join_confirm_password').val();
                console.log("outside valid");
                //Perform validation of the form inputs
                if (fname.length > 0 && lname.length > 0 && email.length > 0 && password.length > 0 && repeatPassword.length > 0 && password == repeatPassword){

                    Promise.resolve()
                    .then(function(){
                      //send the email and password to the post route
                        return $.post('join', 'username=' + email + '&password=' + password + '&fname=' + fname +'&lname='+lname);
                    })
                    .then(function(auth){
                      
                        if (auth.isValid){
                           console.log("jaison_signinvalid");
                            $('#error').text = '';
                            //redirect user to the siginin page
                            window.location.replace('/');
                        } else {
                          //display error message
                            $('#error').html(auth.message);
                            $('#email').html('');
                            $('#password').html('');
                            $('#repeat_password').html('');
                        }
                    })
                    .catch(function(err){
                        console.log(err);
                    })
                } else {
                  
                  toastr.error('Please provide first name, last name, username, email  and password and ensure passwords match', 'Error');

                   
                }
            }
        </script>

  </head>
    <body> <!--onload function gets called here -->

<header>

  <!-- NAVIGATION -->
<nav class="navbar">
  <div class="container">
    <div class="col-md-4 lpanel col-sm-12 col-xs-12">
    <i class="fa fa-instagram hidden-sm hidden-xs" aria-hidden="true"></i> Instagram
    </div>
    <div class="col-md-4 hidden-sm hidden-xs">
    <div class="input-group">
      <input type="text" class="form-control" placeholder="Search for...">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button">Go!</button>
      </span>
    </div>
    </div>
    <div class="col-md-4 hidden-sm hidden-xs">


  </div>
</nav>
</header>
<!-- main-wrapper for User Post Listings-->
<div class="main-wrapper">


    <div id="posts" class="container">


    
        <div class="col-md-6 col-md-offset-4">
          
            <p id="success_msg"></p>
            <p id="error"></p>
                    <h2>Signup</h2>

              <form id="insta_join" data-toggle="validator">
                
                        <div class="form-group">
                            <label for="exampleInputFname">First Name</label>
                          <input id="join_fname" type="text" class="form-control"  aria-describedby="fnameHelp" placeholder="Enter Fname">
                          <div class="help-block with-errors"></div>

                        </div>
                        <div class="form-group">
                          <label for="exampleInputFname">Last Name</label>
                          <input id="join_lname" type="text" class="form-control" aria-describedby="lnameHelp" placeholder="Enter Lname">
                          
                       <div class="help-block with-errors"></div>

                        </div>
                        
                        <div class="form-group">
                          <label for="exampleInputEmail1">Email address</label>
                          <input id="join_email" type="email" class="form-control"  aria-describedby="emailHelp" placeholder="Enter email">
                          <div class="help-block with-errors"></div>

                        </div>
                        <div class="form-group">
                          <label for="exampleInputPassword1">Password</label>
                          <input id="join_password" data-minlength="3" type="password" class="form-control" placeholder="Password">
                          <div class="help-block with-errors"></div>

                        </div>
                        <div class="form-group">
                          <label for="exampleInputPassword2">Confirm Password</label>
                          <input id="join_confirm_password" data-match="#join_password" data-match-error="Whoops, these don't match" type="password" class="form-control"  placeholder="Password">
                         <div class="help-block with-errors"> </div>

                        </div>
                        <button type="button" class="btn btn-primary" onclick="handleJoinAttempt()">Submit</button>
              </form>
              
              <div>
                <p>Existing User? <a href="/">Signin!</a></p>
                <p>Forgot password? Click <a href="/passwordreset">here</a></p>
              </div>
        </div>
        



    </div>
   


</div>
<!-- /main-wrapper -->

<!-- FOOTER -->
    <div class="container">



      <div class="listing-outer col-md-12">

      <!-- FOOTER for desktop version -->
      <div class="footer-inner hidden-sm hidden-xs">
          <div class="footer-top">
           <ul>
                <li class="footer-menu ">About us</li>
                <li class="footer-menu">Support</li>
                <li class="footer-menu">Blog</li>
                <li class="footer-menu">Press</li>
                <li class="footer-menu">Api</li>
                <li class="footer-menu">Jobs</li>
            </ul>



          </div>


          <div class="copyrights">
                    <p class="">&copy; 2017 INSTAGRAM</p>

          </div>

      </div>

      <!-- FOOTER for mobile version -->
      <div class="footer-mobile hidden-lg hidden-md">       


            <div class="col-sm-3">

              <a href=""><i class="fa fa-home" aria-hidden="true"></i></a>
              
            </div>

            <div class="col-sm-3">

              <a href=""><i class="fa fa-search" aria-hidden="true"></i></a>
              
            </div>

            <div class="col-sm-3">

              <a href=""><i class="fa fa-heart-o" aria-hidden="true"></i></a>
              
            </div>
            
            <div class="col-sm-3">

              <a href=""><i class="fa fa-map-o" aria-hidden="true"></i></a>
              
            </div>        

      </div>
      
    </div>

  </body>
</html>
